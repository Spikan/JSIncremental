<!doctype html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soda Clicker Pro</title>
    <meta name="description" content="Soda Clicker Pro" />
    <meta name="author" content="Spikan" />

    <link rel="icon" type="image/png" href="/assets/regSoda-AP9mlaHX.png" />

    <!-- Eruda Mobile Debug Tool -->
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script>
      eruda.init();
    </script>
    <script>
      // Safety check to ensure functions are available - moved to after main.js loads
      window.addEventListener('load', function () {
        // Wait for modules to load and APIs to be available
        function checkFunctionsLoaded() {
          var hasSwitchTab = !!(
            window.App &&
            window.App.ui &&
            typeof window.App.ui.switchTab === 'function'
          );
          if (!hasSwitchTab) {
            console.log('‚è≥ Waiting for App.ui.switchTab...');
            setTimeout(checkFunctionsLoaded, 200);
            return;
          }
          console.log('‚úÖ App.ui.switchTab is available');
        }

        // Start checking after a brief initial delay
        setTimeout(checkFunctionsLoaded, 1000);
      });
    </script>
    <script type="module" crossorigin src="/assets/index-CbzFvQ08.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/game-systems-qTyZVtHL.js" />
    <link rel="modulepreload" crossorigin href="/assets/game-ui-DaP5bmRF.js" />
    <link rel="modulepreload" crossorigin href="/assets/index-CbzFvQ08.js" />
    <link rel="modulepreload" crossorigin href="/assets/vendor-D12Tu0ll.js" />
    <link rel="modulepreload" crossorigin href="/assets/vendor-zustand-DMGjmEWk.js" />
    <link rel="modulepreload" crossorigin href="/assets/game-core-BYxwnpoD.js" />
    <link rel="stylesheet" crossorigin href="/assets/index-8k9QaZXe.css" />
  </head>

  <body>
    <!-- Debug: Test if JavaScript runs immediately -->
    <script>
      console.log('üöÄ IMMEDIATE JAVASCRIPT TEST - Page loaded, JS is running');
      console.log('üöÄ Window object available:', typeof window);
      console.log('üöÄ Document readyState:', document.readyState);
    </script>

    <!-- Splash Screen -->
    <div
      id="splashScreen"
      class="splash-overlay"
      onclick="console.log('üî• DIRECT HTML CLICK:', event.clientX, event.clientY, event.target, event.target.style.display);"
      style="display: block !important"
    >
      <div class="splash-content">
        <div class="splash-title">
          <h1 class="splash-main-title">SODA CLICKER</h1>
          <h2 class="splash-subtitle">PRO</h2>
        </div>
        <div class="splash-subtitle-text">
          <p>THE ULTIMATE SODA DRINKING EXPERIENCE</p>
        </div>
        <div class="splash-instruction">
          <p>CLICK TO START</p>
        </div>
        <div class="splash-warning">
          ‚ö†Ô∏è This game is under active development. Things WILL stop working randomly.
        </div>
        <div class="splash-buttons">
          <button class="splash-start-btn" data-action="startGame">START</button>
          <button
            class="splash-start-btn"
            onclick="forceStartGame()"
            style="margin-top: 10px; background: #ff6b35"
          >
            FORCE START
          </button>
          <button
            class="splash-start-btn"
            onclick="debugSplashHandlers()"
            style="margin-top: 10px; background: #4a90e2; font-size: 12px"
          >
            DEBUG HANDLERS
          </button>
          <button
            class="splash-start-btn"
            onclick="debugSplashScreen()"
            style="margin-top: 10px; background: #e74c3c; font-size: 12px"
          >
            DEBUG SCREEN
          </button>
        </div>
        <div class="splash-version">
          <p>v1.0 - Inspired by Soda Drinker Pro</p>
        </div>
      </div>
    </div>

    <!-- Fallback script for splash screen issues -->
    <script>
      // Fallback mechanism for splash screen issues
      function forceStartGame() {
        console.log('üîÑ Force start game called');
        const splashScreen = document.getElementById('splashScreen');
        const gameContent = document.getElementById('gameContent');

        if (splashScreen && gameContent) {
          splashScreen.style.display = 'none';
          gameContent.style.display = 'block';
          console.log('‚úÖ Game content shown via fallback');

          // Enhanced initialization sequence for fallback
          initializeGameSystems();
        } else {
          console.error('‚ùå Required DOM elements not found for fallback');
        }
      }

      // Comprehensive game systems initialization
      function initializeGameSystems() {
        console.log('üîß Initializing game systems via fallback...');

        // Step 1: Ensure App object exists
        if (!window.App) {
          console.error('‚ùå App object not found - cannot initialize game systems');
          return;
        }

        // Step 2: Initialize DOM cache if needed
        if (window.DOM_CACHE && typeof window.DOM_CACHE.init === 'function') {
          try {
            window.DOM_CACHE.init();
            console.log('‚úÖ DOM cache initialized');
          } catch (error) {
            console.warn('‚ö†Ô∏è Failed to initialize DOM cache:', error);
          }
        }

        // Step 3: Initialize UI systems
        if (window.App.ui && typeof window.App.ui.initializeUI === 'function') {
          try {
            window.App.ui.initializeUI();
            console.log('‚úÖ UI systems initialized');
          } catch (error) {
            console.warn('‚ö†Ô∏è Failed to initialize UI systems:', error);
          }
        }

        // Step 4: Initialize button system
        if (window.App.ui && typeof window.App.ui.initButtonSystem === 'function') {
          try {
            window.App.ui.initButtonSystem();
            console.log('‚úÖ Button system initialized');
          } catch (error) {
            console.warn('‚ö†Ô∏è Failed to initialize button system:', error);
          }
        }

        // Step 5: Initialize game logic
        if (typeof window.initGame === 'function') {
          try {
            window.initGame();
            console.log('‚úÖ Game logic initialized');
          } catch (error) {
            console.error('‚ùå Failed to initialize game logic:', error);
          }
        }

        // Step 6: Update all displays
        if (window.App.ui && typeof window.App.ui.updateAllDisplays === 'function') {
          try {
            setTimeout(() => {
              window.App.ui.updateAllDisplays();
              console.log('‚úÖ All displays updated');
            }, 100);
          } catch (error) {
            console.warn('‚ö†Ô∏è Failed to update displays:', error);
          }
        }

        // Step 7: Start game loop with retry until loop system is ready
        const tryStartLoop = () => {
          if (
            window.App.systems &&
            window.App.systems.loop &&
            typeof window.App.systems.loop.start === 'function'
          ) {
            try {
              window.App.systems.loop.start({
                updateDrinkProgress: () => {
                  try {
                    const st = window.App?.state?.getState?.() || {};
                    const now = Date.now();
                    const last = Number(st.lastDrinkTime || 0);
                    const rate = Number(st.drinkRate || 1000);
                    const pct = Math.min(((now - last) / Math.max(rate, 1)) * 100, 100);
                    window.App?.state?.setState?.({ drinkProgress: pct });
                    window.App?.ui?.updateDrinkProgress?.(pct, rate);
                  } catch (error) {
                    console.warn('Error updating drink progress:', error);
                  }
                },
                processDrink: () => {
                  try {
                    window.App?.systems?.drink?.processDrink?.();
                  } catch (error) {
                    console.warn('Error processing drink:', error);
                  }
                },
                updateStats: () => {
                  try {
                    window.App?.ui?.updatePlayTime?.();
                    window.App?.ui?.updateLastSaveTime?.();
                    window.App?.ui?.updateAllStats?.();
                    window.App?.ui?.updatePurchasedCounts?.();
                    window.App?.ui?.checkUpgradeAffordability?.();
                    window.App?.systems?.unlocks?.checkAllUnlocks?.();
                  } catch (error) {
                    console.warn('Error updating stats:', error);
                  }
                },
                updatePlayTime: () => {
                  try {
                    window.App?.ui?.updatePlayTime?.();
                  } catch (error) {
                    console.warn('Error updating play time:', error);
                  }
                },
                updateLastSaveTime: () => {
                  try {
                    window.App?.ui?.updateLastSaveTime?.();
                  } catch (error) {
                    console.warn('Error updating last save time:', error);
                  }
                },
              });
              console.log('‚úÖ Game loop started');
            } catch (error) {
              console.warn('‚ö†Ô∏è Failed to start game loop:', error);
            }
          } else {
            console.log('‚è≥ Loop system not ready in fallback, retrying...');
            setTimeout(tryStartLoop, 100);
          }
        };
        setTimeout(tryStartLoop, 200);

        console.log('‚úÖ Fallback initialization sequence complete');
      }

      // Auto-fallback after 10 seconds if splash screen is still visible
      setTimeout(() => {
        const splashScreen = document.getElementById('splashScreen');
        if (splashScreen && splashScreen.style.display !== 'none') {
          console.log('‚è∞ Auto-fallback triggered after 10 seconds');
          forceStartGame();
        }
      }, 10000);

      // Expose globally
      window.forceStartGame = forceStartGame;
      window.initializeGameSystems = initializeGameSystems;

      // Debug function to check splash screen state
      window.debugSplashScreen = function () {
        console.log('=== SPLASH SCREEN STATE DEBUG ===');

        const splashScreen = document.getElementById('splashScreen');
        const gameContent = document.getElementById('gameContent');

        console.log('Splash screen element exists:', !!splashScreen);
        console.log('Game content element exists:', !!gameContent);
        console.log('startGame function exists:', typeof window.startGame);

        if (splashScreen) {
          console.log('Splash screen computed style:', {
            display: window.getComputedStyle(splashScreen).display,
            visibility: window.getComputedStyle(splashScreen).visibility,
            opacity: window.getComputedStyle(splashScreen).opacity,
            zIndex: window.getComputedStyle(splashScreen).zIndex,
            position: window.getComputedStyle(splashScreen).position,
            pointerEvents: window.getComputedStyle(splashScreen).pointerEvents,
            width: window.getComputedStyle(splashScreen).width,
            height: window.getComputedStyle(splashScreen).height,
          });

          console.log('Splash screen bounding rect:', splashScreen.getBoundingClientRect());

          // Test if element is actually clickable
          const rect = splashScreen.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;
          console.log('Center point for testing:', centerX, centerY);

          // Test element at point
          const elementAtPoint = document.elementFromPoint(centerX, centerY);
          console.log('Element at center point:', elementAtPoint);
          console.log('Is splash screen at center?', elementAtPoint === splashScreen);

          // Add temporary visual indicator
          splashScreen.style.backgroundColor = '#ff6b35'; // Temporary red background
          setTimeout(() => {
            splashScreen.style.backgroundColor = '#001789'; // Restore original
          }, 2000);
        }
      };

      // Debug function to check splash screen event handlers
      window.debugSplashHandlers = function () {
        console.log('=== SPLASH SCREEN DEBUG ===');

        const splashScreen = document.getElementById('splashScreen');
        const startBtn = document.querySelector('.splash-start-btn[data-action="startGame"]');

        console.log('Splash screen element:', !!splashScreen);
        console.log('Start button element:', !!startBtn);
        console.log('startGame function on window:', typeof window.startGame);

        if (startBtn) {
          console.log('Start button event listeners:');
          // Get event listeners (if available)
          if (startBtn._events || startBtn.__events__) {
            console.log('Has event listeners:', !!startBtn._events || !!startBtn.__events__);
          } else {
            console.log('Event listeners check: Not accessible via standard properties');
          }
        }

        if (splashScreen) {
          console.log('Splash screen event listeners:');
          if (splashScreen._events || splashScreen.__events__) {
            console.log(
              'Has event listeners:',
              !!splashScreen._events || !!splashScreen.__events__
            );
          } else {
            console.log('Event listeners check: Not accessible via standard properties');
          }
        }

        // Test if we can manually trigger the start
        console.log('Testing manual startGame call...');
        try {
          if (typeof window.startGame === 'function') {
            console.log('‚úÖ startGame function exists, calling it...');
            window.startGame();
          } else {
            console.log('‚ùå startGame function not available');
          }
        } catch (error) {
          console.log('‚ùå Error calling startGame:', error);
        }
      };

      // Debug function to check game system status
      window.debugGameSystems = function () {
        console.log('=== GAME SYSTEMS DEBUG ===');

        // Check App object
        console.log('App object:', !!window.App);
        if (window.App) {
          console.log('App.state:', !!window.App.state);
          console.log('App.ui:', !!window.App.ui);
          console.log('App.systems:', !!window.App.systems);
          console.log('App.events:', !!window.App.events);
        }

        // Check DOM elements
        console.log('splashScreen:', !!document.getElementById('splashScreen'));
        console.log('gameContent:', !!document.getElementById('gameContent'));
        console.log('sodaButton:', !!document.getElementById('sodaButton'));

        // Check DOM cache
        console.log('DOM_CACHE:', !!window.DOM_CACHE);
        if (window.DOM_CACHE) {
          console.log(
            'DOM_CACHE.isReady():',
            window.DOM_CACHE.isReady ? window.DOM_CACHE.isReady() : 'N/A'
          );
        }

        // Check key functions
        console.log('initGame function:', typeof window.initGame);
        console.log('startGame function:', typeof window.startGame);
        console.log('switchTab function:', typeof window.App?.ui?.switchTab);
        console.log(
          'handleSodaClick function:',
          typeof window.App?.systems?.clicks?.handleSodaClick
        );

        // Check button system
        console.log('Button system initialized:', typeof window.App?.ui?.initButtonSystem);

        // Check game loop
        console.log('Game loop system:', typeof window.App?.systems?.loop?.start);

        // Check tab buttons
        const tabButtons = document.querySelectorAll('.tab-btn');
        console.log('Tab buttons found:', tabButtons.length);

        // Check soda button
        const sodaButton = document.getElementById('sodaButton');
        console.log('Soda button found:', !!sodaButton);
        if (sodaButton) {
          console.log('Soda button event listeners:', 'Check browser dev tools');
        }

        console.log('=== END GAME SYSTEMS DEBUG ===');
      };
    </script>

    <!-- Main Game Content -->
    <div id="gameContent" class="game-content" style="display: none">
      <div id="topDiv" class="center">
        <div id="levelDiv">
          <h2>Level <span id="levelNumber">1</span></h2>
          <h3>
            Clicking Soda
            <br />
            <span id="levelText">On a Blue Background</span>
          </h3>
        </div>
        <div id="topSipCounter" class="top-sip-counter">
          <span class="top-sip-label">Total Sips:</span>
          <span id="topSipValue" class="top-sip-value">0</span>
          <span class="top-sip-separator">|</span>
          <span class="top-sip-label">per drink:</span>
          <span id="topSipsPerDrink" class="top-sip-value">1</span>
          <span class="top-sip-separator">|</span>
          <span class="top-sip-label">per second:</span>
          <span id="topSipsPerSecond" class="top-sip-value">1</span>
        </div>
        <h1>
          Soda Clicker
          <br />
          PRO!
        </h1>
      </div>

      <!-- Tab Navigation -->
      <div class="tab-navigation">
        <button class="tab-btn active" data-action="switchTab:soda">ü•§ Soda Clicking</button>
        <button class="tab-btn" data-action="switchTab:unlocks">üîì Unlocks</button>
        <button class="tab-btn" data-action="switchTab:shop">üõí Shop & Upgrades</button>
        <button class="tab-btn" data-action="switchTab:stats">üìä Statistics</button>
        <button class="tab-btn" data-action="switchTab:god">üôè Talk to God</button>
        <button class="tab-btn" data-action="switchTab:options">‚öôÔ∏è Options</button>
        <button class="tab-btn" data-action="switchTab:dev">üîß Dev Tools</button>
      </div>

      <!-- Drink Progress Bar - Moved to Header -->
      <div class="drink-progress-container">
        <div class="drink-info">
          <span class="drink-label">Next Drink:</span>
          <span class="drink-countdown" id="drinkCountdown">5.0s</span>
        </div>
        <div class="drink-progress-bar">
          <div class="drink-progress-fill" id="drinkProgressFill"></div>
        </div>
        <!-- Drink Speed Upgrade Button - Compact layout below progress bar -->
        <div class="drink-speed-upgrade-container">
          <button class="drink-speed-upgrade-btn" data-action="buyFasterDrinks">
            <div class="drink-speed-upgrade-icon">‚ö°</div>
            <div class="drink-speed-upgrade-info">
              <div class="drink-speed-upgrade-name">Faster Drinks</div>
              <div class="drink-speed-upgrade-cost">
                <span id="fasterDrinksCostCompact">80</span> Sips
              </div>
            </div>
          </button>
          <div class="drink-speed-upgrade-stats">
            <span class="drink-speed-stat"
              >Speed: <span id="currentDrinkSpeedCompact">5.00s</span></span
            >
            <span class="drink-speed-stat">Bonus: <span id="drinkSpeedBonusCompact">0%</span></span>
          </div>
          <button class="drink-speed-upgrade-btn upgrade" data-action="upgradeFasterDrinks">
            <div class="drink-speed-upgrade-icon">üîß</div>
            <div class="drink-speed-upgrade-info">
              <div class="drink-speed-upgrade-name">Upgrade Faster Drinks</div>
              <div class="drink-speed-upgrade-cost">
                <span id="fasterDrinksUpCostCompact">1500</span> Sips
              </div>
            </div>
          </button>
        </div>
      </div>

      <!-- Soda Clicking Tab -->
      <div id="sodaTab" class="tab-content active">
        <div id="sodaDiv" class="center">
          <div class="soda-container">
            <img
              src="/assets/regSoda-AP9mlaHX.png"
              id="sodaButton"
              data-action="sodaClick"
              data-args="1"
              alt="a picture of soda for you to click"
            />
          </div>

          <!-- Clicking Upgrades Section - Compact layout next to soda button -->
          <div class="clicking-upgrades-container">
            <div class="clicking-upgrade-item">
              <button class="clicking-upgrade-btn" data-action="buySuction">
                <div class="clicking-upgrade-icon">üí®</div>
                <div class="clicking-upgrade-info">
                  <div class="clicking-upgrade-name">Suction</div>
                  <div class="clicking-upgrade-cost">
                    <span id="suctionCostCompact">40</span> Sips
                  </div>
                </div>
              </button>
              <div class="clicking-upgrade-stats">
                <span class="clicking-stat"
                  >+<span id="suctionClickBonusCompact">0.3</span> Sips/click</span
                >
              </div>
            </div>

            <div class="clicking-upgrade-item">
              <button class="clicking-upgrade-btn" data-action="buyCriticalClick">
                <div class="clicking-upgrade-icon">‚ö°</div>
                <div class="clicking-upgrade-info">
                  <div class="clicking-upgrade-name">Critical Click</div>
                  <div class="clicking-upgrade-cost">
                    <span id="criticalClickCostCompact">60</span> Sips
                  </div>
                </div>
              </button>
              <div class="clicking-upgrade-stats">
                <span class="clicking-stat"
                  ><span id="criticalClickChanceCompact">0.1</span>% chance</span
                >
              </div>
            </div>
          </div>
        </div>

        <div id="levelUpDiv" class="center">
          <button class="level-up-btn disabled" data-action="levelUp">
            <div class="cost-line">
              <span id="levelCost" class="cost-number">3000</span>
              <span class="cost-text">Sips</span>
            </div>
            Level Up <br />
            (+ 150% per drink)
          </button>
        </div>
      </div>

      <!-- Unlocks Tab -->
      <div id="unlocksTab" class="tab-content">
        <div class="unlocks-container">
          <div class="unlocks-header">
            <h2>üîì Feature Unlocks</h2>
            <p class="unlocks-subtitle">Discover new features as you progress!</p>
          </div>

          <div class="unlocks-grid" id="unlocksGrid">
            <!-- Unlock items will be populated by JavaScript -->
          </div>

          <div class="unlocks-progress">
            <div class="progress-info">
              <span class="progress-label">Progress:</span>
              <span class="progress-value" id="unlocksProgress">0/12</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="unlocksProgressFill"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Shop & Upgrades Tab -->
      <div id="shopTab" class="tab-content">
        <div id="shopDiv" class="center">
          <div class="shop-container">
            <div class="shop-item">
              <div class="shop-header">
                <button class="shop-btn" data-action="buyStraw">
                  <div class="cost-line">
                    <span id="strawCost" class="cost-number">5</span>
                    <span class="cost-text">Sips</span>
                  </div>
                  Extra Straw
                </button>
              </div>
              <div class="shop-stats">
                <div class="shop-stat">
                  <span class="stat-label">Owned:</span>
                  <span id="straws" class="stat-value">0</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">+ per drink:</span>
                  <span id="strawSPD" class="stat-value">0.6</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">Total production:</span>
                  <span id="totalStrawSPD" class="stat-value">0</span> per drink
                </div>
              </div>
            </div>

            <div class="shop-item">
              <div class="shop-header">
                <button class="shop-btn" data-action="buyWiderStraws">
                  <div class="cost-line">
                    <span id="widerStrawsCost" class="cost-number">150</span>
                    <span class="cost-text">Sips</span>
                  </div>
                  Wider Straws Upgrade<br />
                  <small style="color: #ff8e53; font-size: 0.7rem"
                    >Increases straw production</small
                  >
                </button>
              </div>
              <div class="shop-stats">
                <div class="shop-stat">
                  <span class="stat-label">Owned:</span>
                  <span id="widerStraws" class="stat-value">0</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">+ per drink:</span>
                  <span id="widerStrawsSPD" class="stat-value">0.6</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">Total production:</span>
                  <span id="totalWiderStrawsSPD" class="stat-value">0</span> per drink
                </div>
              </div>
            </div>

            <div class="shop-item">
              <div class="shop-header">
                <button class="shop-btn" data-action="buyCup">
                  <div class="cost-line">
                    <span id="cupCost" class="cost-number">15</span>
                    <span class="cost-text">Sips</span>
                  </div>
                  Bigger Cup
                </button>
              </div>
              <div class="shop-stats">
                <div class="shop-stat">
                  <span class="stat-label">Owned:</span>
                  <span id="cups" class="stat-value">0</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">+ per drink:</span>
                  <span id="cupSPD" class="stat-value">1.2</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">Total production:</span>
                  <span id="totalCupSPD" class="stat-value">0</span> per drink
                </div>
              </div>
            </div>

            <div class="shop-item">
              <div class="shop-header">
                <button class="shop-btn" data-action="buyBetterCups">
                  <div class="cost-line">
                    <span id="betterCupsCost" class="cost-number">400</span>
                    <span class="cost-text">Sips</span>
                  </div>
                  Better Cups Upgrade<br />
                  <small style="color: #ff8e53; font-size: 0.7rem">Increases cup production</small>
                </button>
              </div>
              <div class="shop-stats">
                <div class="shop-stat">
                  <span class="stat-label">Owned:</span>
                  <span id="betterCups" class="stat-value">0</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">+ per drink:</span>
                  <span id="betterCupsSPD" class="stat-value">1.2</span>
                </div>
                <div class="shop-stat">
                  <span class="stat-label">Total production:</span>
                  <span id="totalBetterCupsSPD" class="stat-value">0</span> per drink
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Options Tab -->
      <div id="optionsTab" class="tab-content">
        <div class="options-container">
          <div class="options-section">
            <h3>üîä Button Audio</h3>
            <div class="sound-controls">
              <button
                id="buttonSoundsToggle"
                data-action="toggleButtonSounds"
                class="sound-toggle-btn"
              >
                üîä Button Sounds ON
              </button>
              <p class="sound-description">Enable or disable button click sound effects</p>
            </div>
          </div>

          <div class="options-section">
            <h3>üíæ Save & Load</h3>
            <div class="save-controls">
              <button data-action="save" class="save-btn">Save Game</button>
              <button data-action="delete_save" class="save-btn">Delete Save</button>
            </div>
          </div>

          <div class="options-section">
            <h3>‚è∞ Auto-Save Settings</h3>
            <div class="autosave-controls">
              <label class="autosave-toggle">
                <input type="checkbox" id="autosaveToggle" data-action="toggleAutosave" />
                <span class="toggle-slider"></span>
                Enable Auto-Save
              </label>
              <div class="autosave-interval">
                <label for="autosaveInterval">Auto-Save Interval:</label>
                <select id="autosaveInterval" data-action="changeAutosaveInterval">
                  <option value="5">5 seconds</option>
                  <option value="10" selected>10 seconds</option>
                  <option value="15">15 seconds</option>
                  <option value="30">30 seconds</option>
                  <option value="60">1 minute</option>
                  <option value="300">5 minutes</option>
                </select>
              </div>
              <div class="autosave-status">
                <span id="autosaveStatus">Auto-save enabled (10s)</span>
              </div>
            </div>
          </div>

          <div class="options-section">
            <h3>üéÆ Game Information</h3>
            <div class="game-info">
              <div class="info-item">
                <span class="info-label">Version:</span>
                <span class="info-value">1.0.0</span>
              </div>
              <div class="info-item">
                <span class="info-label">Last Save:</span>
                <span class="info-value" id="lastSaveTime">Never</span>
              </div>
              <div class="info-item">
                <span class="info-label">Play Time:</span>
                <span class="info-value" id="playTime">0:00:00</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats Tab -->
      <div id="statsTab" class="tab-content">
        <div class="stats-container">
          <div class="stats-section">
            <h3>‚è±Ô∏è Time & Progress</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">‚è∞</div>
                <div class="stat-content">
                  <div class="stat-label">Total Play Time</div>
                  <div class="stat-value" id="totalPlayTime">0:00:00</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-content">
                  <div class="stat-label">Current Session</div>
                  <div class="stat-value" id="sessionTime">0:00:00</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-content">
                  <div class="stat-label">Days Since Start</div>
                  <div class="stat-value" id="daysSinceStart">0</div>
                </div>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <h3>üñ±Ô∏è Clicking Statistics</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">üëÜ</div>
                <div class="stat-content">
                  <div class="stat-label">Total Clicks</div>
                  <div class="stat-value" id="totalClicks">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-content">
                  <div class="stat-label">Clicks Per Second</div>
                  <div class="stat-value" id="clicksPerSecond">0.00</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-content">
                  <div class="stat-label">Best Click Streak</div>
                  <div class="stat-value" id="bestClickStreak">0</div>
                </div>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <h3>üí∞ Economy & Progress</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">üíß</div>
                <div class="stat-content">
                  <div class="stat-label">Total Sips Earned</div>
                  <div class="stat-value" id="totalSipsEarned">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üìà</div>
                <div class="stat-content">
                  <div class="stat-label">Current Sips/Second</div>
                  <div class="stat-value" id="currentSipsPerSecond">0.00</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üöÄ</div>
                <div class="stat-content">
                  <div class="stat-label">Highest Sips/Second</div>
                  <div class="stat-value" id="highestSipsPerSecond">0.00</div>
                </div>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <h3>üõí Shop & Upgrades</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">ü•§</div>
                <div class="stat-content">
                  <div class="stat-label">Straws Purchased</div>
                  <div class="stat-value" id="strawsPurchased">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">‚òï</div>
                <div class="stat-content">
                  <div class="stat-label">Cups Purchased</div>
                  <div class="stat-value" id="cupsPurchased">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">ü•§</div>
                <div class="stat-content">
                  <div class="stat-label">Wider Straw Upgrades</div>
                  <div class="stat-value" id="widerStrawsPurchased">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">‚òï</div>
                <div class="stat-content">
                  <div class="stat-label">Better Cup Upgrades</div>
                  <div class="stat-value" id="betterCupsPurchased">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üí®</div>
                <div class="stat-content">
                  <div class="stat-label">Suctions Purchased</div>
                  <div class="stat-value" id="suctionsPurchased">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üí•</div>
                <div class="stat-content">
                  <div class="stat-label">Critical Clicks</div>
                  <div class="stat-value" id="criticalClicksPurchased">0</div>
                </div>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <h3>üéâ Achievements & Milestones</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">‚≠ê</div>
                <div class="stat-content">
                  <div class="stat-label">Current Level</div>
                  <div class="stat-value" id="currentLevel">1</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üîß</div>
                <div class="stat-content">
                  <div class="stat-label">Total Upgrades</div>
                  <div class="stat-value" id="totalUpgrades">0</div>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">üíé</div>
                <div class="stat-content">
                  <div class="stat-label">Faster Drinks Owned</div>
                  <div class="stat-value" id="fasterDrinksOwned">0</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TempleOS God Tab -->
      <div id="godTab" class="tab-content">
        <div class="god-container">
          <div class="god-header">
            <h2>üôè Talk to God</h2>
            <p class="god-subtitle">Seek divine wisdom and guidance</p>
          </div>

          <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
              <div class="message god-message">
                <div class="message-avatar">
                  <img
                    src="/assets/TempleOS-nua8Yw7k.jpg"
                    alt="God"
                    style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px"
                  />
                </div>
                <div class="message-content">
                  <div class="message-sender">God</div>
                  <div class="message-text">
                    Greetings, mortal! I am listening to your prayers. What would you like to
                    discuss?
                  </div>
                </div>
              </div>
            </div>

            <div class="chat-input-container">
              <input
                type="text"
                id="chatInput"
                class="chat-input"
                placeholder="Type your message to God..."
                maxlength="100"
              />
              <button data-action="sendMessage" class="chat-send-btn">üôè Send</button>
            </div>
          </div>

          <div class="god-info">
            <p>
              üí° <strong>Tip:</strong> God responds with divine wisdom and guidance. Type anything
              to receive spiritual insight!
            </p>
            <p style="margin-top: 1rem; font-size: 0.9em; color: #ff8e53; font-style: italic">
              <strong>Divine Inspiration:</strong> This sacred oracle draws wisdom from ancient
              sacred texts, providing guidance through carefully selected words of divine origin.<br />
              <em
                >The divine word generator uses mystical wisdom to offer meaningful insights and
                inspiration for your journey.</em
              >
            </p>
            <p style="margin-top: 0.5rem; font-size: 0.8em; color: #888; font-style: italic">
              <em>‚ö° If you know, you know... this oracle runs on 64-bit divine wisdom ‚ú®</em>
            </p>
          </div>
        </div>
      </div>

      <!-- Dev Tools Tab -->
      <div id="devTab" class="tab-content">
        <div class="dev-container">
          <div class="dev-header">
            <h2>üîß Development Tools</h2>
            <p class="dev-subtitle">Testing and development utilities</p>
            <div class="dev-status" id="devStatus">
              <span class="dev-status-label">Dev Mode:</span>
              <span class="dev-status-value" id="devModeStatus">Disabled</span>
            </div>
          </div>

          <div class="dev-section">
            <h3>üöÄ Feature Unlocks</h3>
            <div class="dev-grid">
              <button data-action="devUnlockAll" class="dev-btn unlock-all">
                <div class="dev-btn-icon">üîì</div>
                <div class="dev-btn-text">Unlock All Features</div>
              </button>
              <button data-action="devUnlockShop" class="dev-btn unlock-shop">
                <div class="dev-btn-icon">üõí</div>
                <div class="dev-btn-text">Unlock Shop</div>
              </button>
              <button data-action="devUnlockUpgrades" class="dev-btn unlock-upgrades">
                <div class="dev-btn-icon">‚ö°</div>
                <div class="dev-btn-text">Unlock All Upgrades</div>
              </button>
              <button data-action="devResetUnlocks" class="dev-btn reset">
                <div class="dev-btn-icon">üîÑ</div>
                <div class="dev-btn-text">Reset Unlocks</div>
              </button>
            </div>
          </div>

          <div class="dev-section">
            <h3>‚è∞ Time Travel</h3>
            <div class="dev-grid">
              <button data-action="devAddTime:3600000" class="dev-btn time-travel">
                <div class="dev-btn-icon">‚è∞</div>
                <div class="dev-btn-text">+1 Hour</div>
              </button>
              <button data-action="devAddTime:86400000" class="dev-btn time-travel">
                <div class="dev-btn-icon">üìÖ</div>
                <div class="dev-btn-text">+1 Day</div>
              </button>
              <button data-action="devAddTime:604800000" class="dev-btn time-travel">
                <div class="dev-btn-icon">üìÜ</div>
                <div class="dev-btn-text">+1 Week</div>
              </button>
              <button data-action="devAddTime:2592000000" class="dev-btn time-travel">
                <div class="dev-btn-icon">üóìÔ∏è</div>
                <div class="dev-btn-text">+1 Month</div>
              </button>
            </div>
          </div>

          <div class="dev-section">
            <h3>üí∞ Resource Management</h3>
            <div class="dev-grid">
              <button data-action="devAddSips:1000" class="dev-btn resources">
                <div class="dev-btn-icon">ü•§</div>
                <div class="dev-btn-text">+1000 Sips</div>
              </button>
              <button data-action="devAddSips:10000" class="dev-btn resources">
                <div class="dev-btn-icon">ü•§</div>
                <div class="dev-btn-text">+10K Sips</div>
              </button>
              <button data-action="devAddSips:100000" class="dev-btn resources">
                <div class="dev-btn-icon">ü•§</div>
                <div class="dev-btn-text">+100K Sips</div>
              </button>
              <button data-action="devAddSips:1000000" class="dev-btn resources">
                <div class="dev-btn-icon">ü•§</div>
                <div class="dev-btn-text">+1M Sips</div>
              </button>
            </div>
          </div>

          <div class="dev-section">
            <h3>üéØ Testing Tools</h3>
            <div class="dev-grid">
              <button data-action="devToggleDevMode" class="dev-btn testing">
                <div class="dev-btn-icon">üîß</div>
                <div class="dev-btn-text">Toggle Dev Mode</div>
              </button>
              <button data-action="devToggleGodMode" class="dev-btn testing">
                <div class="dev-btn-icon">üëë</div>
                <div class="dev-btn-text">Toggle God Mode</div>
              </button>
              <button data-action="devShowDebugInfo" class="dev-btn testing">
                <div class="dev-btn-icon">üêõ</div>
                <div class="dev-btn-text">Show Debug Info</div>
              </button>
              <button data-action="devExportSave" class="dev-btn testing">
                <div class="dev-btn-icon">üíæ</div>
                <div class="dev-btn-text">Export Save</div>
              </button>
            </div>
          </div>

          <div class="dev-section">
            <h3>üåå Large Number Scaling Tests</h3>
            <div class="dev-grid">
              <button
                data-action="largeNumberTest:addMassiveSips"
                class="dev-btn large-number-test"
              >
                <div class="dev-btn-icon">üíß</div>
                <div class="dev-btn-text">+1e500 Sips</div>
              </button>
              <button data-action="largeNumberTest:addHugeStraws" class="dev-btn large-number-test">
                <div class="dev-btn-icon">ü•§</div>
                <div class="dev-btn-text">+1e750 Straws</div>
              </button>
              <button
                data-action="largeNumberTest:addMassiveCups"
                class="dev-btn large-number-test"
              >
                <div class="dev-btn-icon">‚òï</div>
                <div class="dev-btn-text">+1e1000 Cups</div>
              </button>
              <button
                data-action="largeNumberTest:addExtremeResources"
                class="dev-btn large-number-test"
              >
                <div class="dev-btn-icon">üåü</div>
                <div class="dev-btn-text">+1e2000 All</div>
              </button>
            </div>
            <div class="dev-grid">
              <button
                data-action="largeNumberTest:testScientificNotation"
                class="dev-btn large-number-test"
              >
                <div class="dev-btn-icon">üî¨</div>
                <div class="dev-btn-text">Test Notation</div>
              </button>
              <button
                data-action="largeNumberTest:resetAllResources"
                class="dev-btn large-number-test reset"
              >
                <div class="dev-btn-icon">üîÑ</div>
                <div class="dev-btn-text">Reset All</div>
              </button>
            </div>
            <div class="dev-info">
              <p>
                üåå <strong>Large Number Tests:</strong> These buttons add extremely large amounts of
                resources to test break_eternity.js capabilities!
              </p>
              <p>
                üìä <strong>Values:</strong> 1e500 = 1 followed by 500 zeros, 1e750 = 1 followed by
                750 zeros, etc.
              </p>
            </div>
          </div>

          <div class="dev-section">
            <h3>üìÅ Save Management</h3>
            <div class="dev-grid">
              <button data-action="devImportSave" class="dev-btn testing">
                <div class="dev-btn-icon">üì•</div>
                <div class="dev-btn-text">Import Save</div>
              </button>
              <button data-action="quickUnlock" class="dev-btn unlock-all">
                <div class="dev-btn-icon">‚ö°</div>
                <div class="dev-btn-text">Quick Unlock</div>
              </button>
            </div>
          </div>

          <div class="dev-info">
            <p>
              ‚ö†Ô∏è <strong>Warning:</strong> These tools are for development and testing purposes
              only!
            </p>
            <p>
              üí° <strong>Tip:</strong> Use these tools to test game balance, debug issues, or
              experiment with different game states.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/break_eternity.js@2.1.2/dist/break_eternity.min.js"></script>
    <script src="https://unpkg.com/zod@3.22.4/lib/index.umd.js"></script>

    <!-- Load modules in proper dependency order -->

    <script>
      // Ensure Decimal is available globally before loading main.js
      if (typeof Decimal === 'undefined') {
        console.error('‚ùå Decimal library not loaded! Game will not work properly.');
      } else {
        console.log('‚úÖ Decimal library loaded successfully');
      }
    </script>
  </body>
</html>
